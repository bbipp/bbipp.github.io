import{f as W,a as j}from"../chunks/BM7X1xUA.js";import{i as R}from"../chunks/DxGrenKC.js";import{o as Z}from"../chunks/LrC88QA7.js";import{f as _,i as z}from"../chunks/CND4MD1f.js";var F=W('<link rel="stylesheet" href="/shared.css"/>');function X(M,K){_(K,!1);var e=0,y=0;let f=!1,h=[],k=[];Z(()=>{C()});function C(){var H,q;var t=document.createElement("div");t.setAttribute("class","full-container");var n=document.createElement("div");n.setAttribute("class","grid-container"),document.getElementsByTagName("body")[0].appendChild(t);let l=document.createElement("div"),c=document.createElement("div");l.className="clue-list-across",c.className="clue-list-down",e=parseInt(window.getComputedStyle(document.body).getPropertyValue("--cols")),y=parseInt(window.getComputedStyle(document.body).getPropertyValue("--rows"));let o=1;for(let a=0;a<y;a++)for(let r=0;r<e;r++){var d=document.createElement("span"),m=document.createElement("span");d.className="square-container";var s=document.createElement("input");if(s.type="text",s.className="square",s.id=(a*e+r).toString(),s.maxLength=1,s.style.padding="0",s.style.border="none",s.style.textTransform="uppercase",s.style.caretColor="transparent",s.className!=="blocked"){let i=a*e+r-1,u=!1;if(((H=document.getElementById(i.toString()))==null?void 0:H.className)==="blocked"||r===0){s.classList.add(o.toString()+"across"),m.innerHTML=o.toString(),o++,u=!0,h[a*e+r]=0;let g=document.createElement("textarea");g.className="clue",g.id=(a*e+r).toString()+"ac",c.appendChild(g)}let E=(a-1)*e+r;if(((q=document.getElementById(E.toString()))==null?void 0:q.className)==="blocked"||a===0){u&&o--,s.classList.add(o.toString()+"down"),m.innerHTML=o.toString(),o++,k[a*e+r]=0;let g=document.createElement("textarea");g.className="clue",g.id=(a*e+r).toString()+"dc",l.appendChild(g)}}s.addEventListener("focus",function(i){var u;((u=document.getElementById((a*e+r).toString()))==null?void 0:u.className)!=="blocked"?L(a*e+r):document.activeElement.style.backgroundColor="dimgray"}),s.addEventListener("blur",function(i){N()}),s.addEventListener("keyup",function(i){var u=0;let E=(a*e+r).toString();var g=document.getElementById(E);if(i.code>="KeyA"&&i.code<="KeyZ"&&(g==null?void 0:g.className)!=="blocked")g.value=i.key.toUpperCase(),u=1;else if(i.key==="Backspace")g.value="",u=-1;else if(i.code==="Space"){A(a*e+r);return}else if(i.key==="Enter"){P();return}f&&(u=u*e);let I=(a*e+r+u).toString();var p=document.getElementById(I);((p==null?void 0:p.className)==="blocked"||p==null)&&i.code>="KeyA"&&i.code<="KeyZ"?x(a*e+r):p&&p.focus()}),s.ondblclick=function(i){A(a*e+r)},s.onkeydown=function(i){if(i.key==="ArrowRight"){f=!1;let p=(a*e+r+1).toString();var u=document.getElementById(p);u&&u.focus()}else if(i.key==="ArrowLeft"){f=!1;let p=(a*e+r-1).toString();var E=document.getElementById(p);E&&E.focus()}else if(i.key==="ArrowDown"){f=!0;let p=((a+1)*e+r).toString();var g=document.getElementById(p);g&&g.focus()}else if(i.key==="ArrowUp"){f=!0;let p=((a-1)*e+r).toString();var I=document.getElementById(p);I&&I.focus()}else i.key==="Tab"&&x(a*e+r)},d.appendChild(m),d.appendChild(s),n.appendChild(d),t.appendChild(n)}let S=document.createElement("form"),b=document.createElement("input"),w=document.createElement("input");b.id="rowInput",w.id="colInput",b.type="number",w.type="number",b.placeholder="rows",w.placeholder="columns";let v=document.createElement("input");v.type="submit",v.value="resize",v.addEventListener("click",a=>{a.preventDefault();let r=document.getElementById("rowInput"),i=document.getElementById("colInput");if(i.value===""||r.value==="")console.log("bad");else{let u=document.querySelector(":root");u.style.setProperty("--cols",i.value),u.style.setProperty("--rows",r.value),document.querySelectorAll("div").forEach(E=>E.remove()),C()}}),S.appendChild(b),S.appendChild(w),S.appendChild(v),t.appendChild(l),t.appendChild(c),t.appendChild(S)}function L(t){var d,m;let n=0;t.toString().includes("c")?n=1:document.getElementById(t.toString()).style.backgroundColor="rgba(0, 0, 255, 0.65)";let l=f?e:1,c=t-l,o=t+l-n;for(;((d=document.getElementById(c.toString()))==null?void 0:d.className)!=="blocked"&&(f||c%e!==e-1)&&c>=0;)document.getElementById(c.toString()).style.backgroundColor="rgba(173, 216, 230, 0.5)",c-=l;for(;((m=document.getElementById(o.toString()))==null?void 0:m.className)!=="blocked"&&(f||o%e!==0)&&o<y*e;)document.getElementById(o.toString()).style.backgroundColor="rgba(173, 216, 230, 0.5)",o+=l}function N(){var t;for(let n=0;n<y*e;n++)((t=document.getElementById(n.toString()))==null?void 0:t.className)!=="blocked"?document.getElementById(n.toString()).style.backgroundColor="transparent":document.getElementById(n.toString()).style.backgroundColor="black"}function A(t){var n;((n=document.getElementById(t.toString()))==null?void 0:n.className)!=="blocked"&&(f=!f,N(),L(t))}function x(t,n){var c,o,d,m,s;if(((c=document.getElementById(t.toString()))==null?void 0:c.className)==="blocked")return;let l=t;if(f){for(;((d=document.getElementById(l.toString()))==null?void 0:d.className)!=="blocked"&&l>=e;)if(l-=e,l<e&&((m=document.getElementById(l.toString()))==null?void 0:m.className)!=="blocked"){l-=e;break}for(l+=e,l++;k[l]===void 0||B(l);)if(l++,l>=y*e){T();return}(s=document.getElementById(l.toString()))==null||s.focus()}else{for(l++;h[l]===void 0||B(l);)if(l++,l>=y*e){T();return}(o=document.getElementById(l.toString()))==null||o.focus()}}function P(){var n,l,c,o;(n=document.activeElement)!=null&&n.classList.value.includes("blocked")?document.activeElement.className="square":(l=document.activeElement)!=null&&l.classList.value.includes("square")&&(N(),document.activeElement.className="blocked",document.activeElement instanceof HTMLInputElement&&(document.activeElement.value="",document.activeElement.maxLength=0));let t=(Number((c=document.activeElement)==null?void 0:c.getAttribute("id"))+1)%(y*e);(o=document.getElementById(t.toString()))==null||o.focus(),V()}function V(){var n,l;h=[],k=[];let t=1;for(let c=0;c<y;c++)for(let o=0;o<e;o++){let d=document.getElementById((c*e+o).toString()),m=d==null?void 0:d.parentElement;if(m.children[0].innerHTML="",d.className!=="blocked"){d.className="",d==null||d.classList.add("square");let s=c*e+o-1,S=!1;(((n=document.getElementById(s.toString()))==null?void 0:n.className)==="blocked"||o===0)&&(d.classList.add(t.toString()+"across"),m.children[0].innerHTML=t.toString(),t++,S=!0,h[c*e+o]=0);let b=(c-1)*e+o;(((l=document.getElementById(b.toString()))==null?void 0:l.className)==="blocked"||c===0)&&(S&&t--,d.classList.add(t.toString()+"down"),m.children[0].innerHTML=t.toString(),t++,k[c*e+o]=0)}}}function B(t){var l,c,o,d;let n=t;if(f){for(;(((l=document.getElementById(n.toString()))==null?void 0:l.className)!=="blocked"||n<e)&&n>=0;){if(document.getElementById(n.toString()).value==="")return!1;n-=e}for(;((c=document.getElementById(t.toString()))==null?void 0:c.className)!=="blocked"&&t<y*e;){if(document.getElementById(t.toString()).value==="")return!1;t+=e}return!0}else{for(;((o=document.getElementById(n.toString()))==null?void 0:o.className)!=="blocked"&&n%e!==e-1&&n>=0;){if(document.getElementById(n.toString()).value==="")return!1;n--}for(;((d=document.getElementById(t.toString()))==null?void 0:d.className)!=="blocked"&&(t%e!==0||t===0)&&t<y*e;){if(document.getElementById(t.toString()).value==="")return!1;t++}}return!0}function T(){var n;let t=0;if(f=!f,f)for(;k[t]===void 0||B(t);)t++;else for(;h[t]===void 0||B(t);)t++;(n=document.getElementById(t.toString()))==null||n.focus()}R();var U=F();j(M,U),z()}export{X as component};
