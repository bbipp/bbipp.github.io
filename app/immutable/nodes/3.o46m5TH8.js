import{t as te,a as le}from"../chunks/BEwVjXMF.js";import{i as ne}from"../chunks/C3gf4BN4.js";import{p as oe,a as se}from"../chunks/DZhw9-6Z.js";import{o as ce}from"../chunks/BZDtRqjk.js";import{p as z}from"../chunks/BYlYhYPy.js";var ae=te('<link rel="stylesheet" href="/shared.css">');function ge(G,J){oe(J,!1);let j=z.url.toString().substring(z.url.toString().lastIndexOf("/")+1),h="",N=[],U=[],K=[];var e=0,b=0;let m=!1;async function Q(t){const l=await fetch("/"+j+".txt");if(l.ok){h=await l.text();for(let s=0;s<h.length;s++)if(h.substring(s,s+1)!="\r")if(h.substring(s,s+1)==`
`){N.push("#");continue}else{N.push(h.substring(s,s+1));continue}}else h="Error loading file";const n=await fetch("/"+j+"Clues.txt");if(n.ok){h=await n.text();let s=h.substring(0,h.indexOf("*")),c=h.substring(h.indexOf("*")+3);for(;s.length>0;)U.push(s.substring(0,s.indexOf("\r"))),s=s.substring(s.indexOf(`
`)+1);for(;c.length>0;)K.push(c.substring(0,c.indexOf("\r"))),c=c.substring(c.indexOf(`
`)+1)}else h="Error loading file";t()}let O=[],v=[];ce(()=>{Q(function(){X()})});function X(){var R,_;e=N.indexOf("#"),b=N.filter(a=>a==="#").length,document.documentElement.style.setProperty("--cols",e.toString()),document.documentElement.style.setProperty("--rows",b.toString());var t=document.createElement("div");t.setAttribute("class","full-container");var l=document.createElement("div");l.setAttribute("class","grid-container"),document.getElementsByTagName("body")[0].appendChild(t);let n=document.createElement("div"),s=document.createElement("div");n.className="clue-list-across",s.className="clue-list-down";let c=1,g=0,f=0,w=0;for(let a=0;a<b;a++)for(let r=0;r<e;r++){var y=document.createElement("span"),k=document.createElement("span"),d=document.createElement("span");y.className="square-container";var o=document.createElement("input");o.type="text",o.className="square",o.id=(a*e+r).toString(),o.maxLength=1,o.style.padding="0",o.style.border="none",o.style.textTransform="uppercase",o.style.caretColor="transparent";let C=document.createElement("textarea");if(C.rows=2,C.readOnly=!0,o.className!=="blocked"){let u=a*e+r-1,E=!1;(((R=document.getElementById(u.toString()))==null?void 0:R.className)==="blocked"||r===0)&&(o.classList.add(c.toString()+"across"),k.innerHTML=c.toString(),E=!0,O[a*e+r]=0,C.className="clue",C.id=(a*e+r).toString()+"ac",C.addEventListener("click",function(I){var i;m=!1,H(a*e+r),(i=document.getElementById((a*e+r).toString()))==null||i.focus(),C.style.backgroundColor="lightblue"}),c++,s.appendChild(C));let p=document.createElement("textarea");p.rows=2,p.readOnly=!0;let S=(a-1)*e+r;for((((_=document.getElementById(S.toString()))==null?void 0:_.className)==="blocked"||a===0)&&(E&&c--,o.classList.add(c.toString()+"down"),k.innerHTML=c.toString(),v[a*e+r]=0,p.className="clue",p.id=(a*e+r).toString()+"dc",p.addEventListener("click",function(I){var i;m=!0,H(a*e+r),(i=document.getElementById((a*e+r).toString()))==null||i.focus(),p.style.backgroundColor="lightblue"}),c++,n.appendChild(p)),o.className.includes("across")&&(C.innerHTML=o.className.substring(o.className.indexOf(" ")+1,o.className.indexOf("across"))+". "+U[f],f++),o.className.includes("down")&&(p.innerHTML=o.className.substring(o.className.lastIndexOf(" ")+1,o.className.indexOf("down"))+". "+K[w],w++),d.innerHTML=N[g],d.style.display="none",g++;N[g]==="#";)g++}o.addEventListener("focus",function(u){var E;((E=document.getElementById((a*e+r).toString()))==null?void 0:E.className)!=="blocked"?H(a*e+r):document.activeElement.style.backgroundColor="dimgray"}),o.addEventListener("blur",function(u){T()}),o.addEventListener("keyup",function(u){var E=0;let p=(a*e+r).toString();var S=document.getElementById(p);if(u.code>="KeyA"&&u.code<="KeyZ"&&(S==null?void 0:S.className)!=="blocked")S.value=u.key.toUpperCase(),E=1;else if(u.key==="Backspace")S.value="",E=-1;else if(u.code==="Space"){P(a*e+r);return}else if(u.key==="Enter"){D();return}m&&(E=E*e);let I=(a*e+r+E).toString();var i=document.getElementById(I);((i==null?void 0:i.className)==="blocked"||i==null)&&u.code>="KeyA"&&u.code<="KeyZ"?V(a*e+r):i&&i.focus()}),o.ondblclick=function(u){P(a*e+r)},o.onkeydown=function(u){if(u.key==="ArrowRight"){m=!1;let i=(a*e+r+1).toString();var E=document.getElementById(i);E&&E.focus()}else if(u.key==="ArrowLeft"){m=!1;let i=(a*e+r-1).toString();var p=document.getElementById(i);p&&p.focus()}else if(u.key==="ArrowDown"){m=!0;let i=((a+1)*e+r).toString();var S=document.getElementById(i);S&&S.focus()}else if(u.key==="ArrowUp"){m=!0;let i=((a-1)*e+r).toString();var I=document.getElementById(i);I&&I.focus()}else u.key==="Tab"&&V(a*e+r)},y.appendChild(k),y.appendChild(o),y.appendChild(d),d.innerHTML===" "&&(o.className="blocked",o.maxLength=0,o.style.backgroundColor="black"),l.appendChild(y),t.appendChild(l)}let B=document.createElement("input");B.type="submit",B.value="check",B.addEventListener("click",a=>{$()});let M=document.createElement("form");M.appendChild(B);let x=document.createElement("h2"),L=document.createElement("div");L.className="cluecont",L.appendChild(x),L.appendChild(s),x.innerHTML="Across",x.className="clueheader";let W=document.createElement("h2"),q=document.createElement("div");q.className="cluecont",q.appendChild(W),q.appendChild(n),W.innerHTML="Down",W.className="clueheader",t.appendChild(L),t.appendChild(q),t.appendChild(M),t.id="full-container-id",Z()}function Y(){let t=document.getElementsByClassName("clue");for(let l=0;l<t.length;l++)t[l].style.backgroundColor="transparent"}function $(){for(let t=0;t<b*e;t++){let l=document.getElementById(t.toString()),n=l.nextSibling;l.className!=="blocked"&&(l.value.toUpperCase()===n.innerHTML.toUpperCase()?l.parentElement.style.backgroundColor="rgb(70, 207, 79)":l.parentElement.style.backgroundColor="rgb(198, 70, 70)")}}function H(t){var g,f;T(),Y();let l=0;t.toString().includes("c")?l=1:document.getElementById(t.toString()).style.backgroundColor="rgba(0, 0, 255, 0.65)";let n=m?e:1,s=t-n,c=t+n-l;for(;((g=document.getElementById(s.toString()))==null?void 0:g.className)!=="blocked"&&(m||s%e!==e-1)&&s>=0;)document.getElementById(s.toString()).style.backgroundColor="rgba(173, 216, 230, 0.5)",s-=n;for(;((f=document.getElementById(c.toString()))==null?void 0:f.className)!=="blocked"&&(m||c%e!==0)&&c<b*e;)document.getElementById(c.toString()).style.backgroundColor="rgba(173, 216, 230, 0.5)",c+=n}function T(){var t;for(let l=0;l<b*e;l++)((t=document.getElementById(l.toString()))==null?void 0:t.className)!=="blocked"?document.getElementById(l.toString()).style.backgroundColor="transparent":document.getElementById(l.toString()).style.backgroundColor="black"}function P(t){var l;((l=document.getElementById(t.toString()))==null?void 0:l.className)!=="blocked"&&(m=!m,T(),H(t))}function V(t,l){var s,c,g,f,w;if(((s=document.getElementById(t.toString()))==null?void 0:s.className)==="blocked")return;let n=t;if(m){for(;((g=document.getElementById(n.toString()))==null?void 0:g.className)!=="blocked"&&n>=e;)if(n-=e,n<e&&((f=document.getElementById(n.toString()))==null?void 0:f.className)!=="blocked"){n-=e;break}for(n+=e,n++;v[n]===void 0||A(n);)if(n++,n>=b*e){F();return}(w=document.getElementById(n.toString()))==null||w.focus()}else{for(n++;O[n]===void 0||A(n);)if(n++,n>=b*e){F();return}(c=document.getElementById(n.toString()))==null||c.focus()}}function D(){var l,n,s,c;(l=document.activeElement)!=null&&l.classList.value.includes("blocked")?document.activeElement.className="square":(n=document.activeElement)!=null&&n.classList.value.includes("square")&&(T(),document.activeElement.className="blocked",document.activeElement instanceof HTMLInputElement&&(document.activeElement.value="",document.activeElement.maxLength=0));let t=(Number((s=document.activeElement)==null?void 0:s.getAttribute("id"))+1)%(b*e);(c=document.getElementById(t.toString()))==null||c.focus(),Z()}function Z(){var s,c,g,f,w;O=[],v=[];let t=0,l=0,n=1;for(let y=0;y<b;y++)for(let k=0;k<e;k++){let d=document.getElementById((y*e+k).toString()),o=(s=d==null?void 0:d.parentElement)==null?void 0:s.children[1],B=d==null?void 0:d.parentElement;if(B.children[0].innerHTML="",d.className!=="blocked"){d.className="",d==null||d.classList.add("square");let M=y*e+k-1,x=!1;(((c=document.getElementById(M.toString()))==null?void 0:c.className)==="blocked"||k===0)&&(d.classList.add(n.toString()+"across"),B.children[0].innerHTML=n.toString(),n++,x=!0,O[y*e+k]=0);let L=(y-1)*e+k;(((g=document.getElementById(L.toString()))==null?void 0:g.className)==="blocked"||y===0)&&(x&&n--,d.classList.add(n.toString()+"down"),B.children[0].innerHTML=n.toString(),n++,v[y*e+k]=0)}d.className.includes("down")?(document.getElementById((o==null?void 0:o.id)+"dc").innerHTML=d.className.substring(d.className.lastIndexOf(" ")+1,d.className.indexOf("down"))+". "+K[l],l++):(f=document.getElementById((o==null?void 0:o.id)+"dc"))==null||f.remove(),d.className.includes("across")?(document.getElementById((o==null?void 0:o.id)+"ac").innerHTML=d.className.substring(d.className.indexOf(" ")+1,d.className.indexOf("across"))+". "+U[t],t++):(w=document.getElementById((o==null?void 0:o.id)+"ac"))==null||w.remove()}}function A(t){var n,s,c,g;let l=t;if(m){for(;(((n=document.getElementById(l.toString()))==null?void 0:n.className)!=="blocked"||l<e)&&l>=0;){if(document.getElementById(l.toString()).value==="")return!1;l-=e}for(;((s=document.getElementById(t.toString()))==null?void 0:s.className)!=="blocked"&&t<b*e;){if(document.getElementById(t.toString()).value==="")return!1;t+=e}return!0}else{for(;((c=document.getElementById(l.toString()))==null?void 0:c.className)!=="blocked"&&l%e!==e-1&&l>=0;){if(document.getElementById(l.toString()).value==="")return!1;l--}for(;((g=document.getElementById(t.toString()))==null?void 0:g.className)!=="blocked"&&(t%e!==0||t===0)&&t<b*e;){if(document.getElementById(t.toString()).value==="")return!1;t++}}return!0}function F(){var l;let t=0;if(m=!m,m)for(;v[t]===void 0||A(t);)t++;else for(;O[t]===void 0||A(t);)t++;(l=document.getElementById(t.toString()))==null||l.focus()}ne();var ee=ae();le(G,ee),se()}export{ge as component};
