import{f as X,a as Y}from"../chunks/BM7X1xUA.js";import{i as $}from"../chunks/DxGrenKC.js";import{o as D}from"../chunks/LrC88QA7.js";import{f as ee,i as te}from"../chunks/CND4MD1f.js";import{p as Z}from"../chunks/nr2WHz7G.js";var le=X('<link rel="stylesheet" href="/shared.css"/>');function de(_,F){ee(F,!1);let K=Z.url.toString().substring(Z.url.toString().lastIndexOf("/")+1),p="",C=[],q=[],U=[];var e=0,b=0;let u=!1;async function R(t){const n=await fetch("/"+K+".txt");if(n.ok){p=await n.text();for(let o=0;o<p.length;o++)if(p.substring(o,o+1)!="\r")if(p.substring(o,o+1)==`
`){C.push("#");continue}else{C.push(p.substring(o,o+1));continue}}else p="Error loading file";const l=await fetch("/"+K+"Clues.txt");if(l.ok){p=await l.text();let o=p.substring(0,p.indexOf("*")),c=p.substring(p.indexOf("*")+3);for(;o.length>0;)q.push(o.substring(0,o.indexOf("\r"))),o=o.substring(o.indexOf(`
`)+1);for(;c.length>0;)U.push(c.substring(0,c.indexOf("\r"))),c=c.substring(c.indexOf(`
`)+1)}else p="Error loading file";t()}let L=[],I=[];D(()=>{R(function(){z()})});function z(){var v,M;e=C.indexOf("#"),b=C.filter(a=>a==="#").length,document.documentElement.style.setProperty("--cols",e.toString()),document.documentElement.style.setProperty("--rows",b.toString());var t=document.createElement("div");t.setAttribute("class","full-container");var n=document.createElement("div");n.setAttribute("class","grid-container"),document.getElementsByTagName("body")[0].appendChild(t);let l=document.createElement("div"),o=document.createElement("div");l.className="clue-list-across",o.className="clue-list-down";let c=1,m=0,f=0,w=0;for(let a=0;a<b;a++)for(let r=0;r<e;r++){var g=document.createElement("span"),h=document.createElement("span"),d=document.createElement("span");g.className="square-container";var s=document.createElement("input");s.type="text",s.className="square",s.id=(a*e+r).toString(),s.maxLength=1,s.style.padding="0",s.style.border="none",s.style.textTransform="uppercase",s.style.caretColor="transparent";let N=document.createElement("textarea");if(N.rows=2,N.readOnly=!0,s.className!=="blocked"){let i=a*e+r-1,y=!1;(((v=document.getElementById(i.toString()))==null?void 0:v.className)==="blocked"||r===0)&&(s.classList.add(c.toString()+"across"),h.innerHTML=c.toString(),y=!0,L[a*e+r]=0,N.className="clue",N.id=(a*e+r).toString()+"ac",N.addEventListener("click",function(x){O(),u=!1,A(a*e+r)}),c++,o.appendChild(N));let k=document.createElement("textarea");k.rows=2,k.readOnly=!0;let S=(a-1)*e+r;for((((M=document.getElementById(S.toString()))==null?void 0:M.className)==="blocked"||a===0)&&(y&&c--,s.classList.add(c.toString()+"down"),h.innerHTML=c.toString(),I[a*e+r]=0,k.className="clue",k.id=(a*e+r).toString()+"dc",k.addEventListener("click",function(x){O(),u=!0,A(a*e+r)}),c++,l.appendChild(k)),s.className.includes("across")&&(N.innerHTML=s.className.substring(s.className.indexOf(" ")+1,s.className.indexOf("across"))+". "+q[f],f++),s.className.includes("down")&&(k.innerHTML=s.className.substring(s.className.lastIndexOf(" ")+1,s.className.indexOf("down"))+". "+U[w],w++),d.innerHTML=C[m],d.style.display="none",m++;C[m]==="#";)m++}s.addEventListener("focus",function(i){var y;((y=document.getElementById((a*e+r).toString()))==null?void 0:y.className)!=="blocked"?A(a*e+r):document.activeElement.style.backgroundColor="dimgray"}),s.addEventListener("blur",function(i){O()}),s.addEventListener("keyup",function(i){var y=0;let k=(a*e+r).toString();var S=document.getElementById(k);if(i.code>="KeyA"&&i.code<="KeyZ"&&(S==null?void 0:S.className)!=="blocked")S.value=i.key.toUpperCase(),y=1;else if(i.key==="Backspace")S.value="",y=-1;else if(i.code==="Space"){W(a*e+r);return}else if(i.key==="Enter"){J();return}u&&(y=y*e);let x=(a*e+r+y).toString();var E=document.getElementById(x);((E==null?void 0:E.className)==="blocked"||E==null)&&i.code>="KeyA"&&i.code<="KeyZ"?j(a*e+r):E&&E.focus()}),s.ondblclick=function(i){W(a*e+r)},s.onkeydown=function(i){if(i.key==="ArrowRight"){u=!1;let E=(a*e+r+1).toString();var y=document.getElementById(E);y&&y.focus()}else if(i.key==="ArrowLeft"){u=!1;let E=(a*e+r-1).toString();var k=document.getElementById(E);k&&k.focus()}else if(i.key==="ArrowDown"){u=!0;let E=((a+1)*e+r).toString();var S=document.getElementById(E);S&&S.focus()}else if(i.key==="ArrowUp"){u=!0;let E=((a-1)*e+r).toString();var x=document.getElementById(E);x&&x.focus()}else i.key==="Tab"&&j(a*e+r)},g.appendChild(h),g.appendChild(s),g.appendChild(d),d.innerHTML===" "&&(s.className="blocked",s.maxLength=0,s.style.backgroundColor="black"),n.appendChild(g),t.appendChild(n)}let B=document.createElement("input");B.type="submit",B.value="check",B.addEventListener("click",a=>{G()});let H=document.createElement("form");H.appendChild(B),t.appendChild(o),t.appendChild(l),t.appendChild(H),t.id="full-container-id",P()}function G(){for(let t=0;t<b*e;t++){let n=document.getElementById(t.toString()),l=n.nextSibling;n.className!=="blocked"&&(n.value.toUpperCase()===l.innerHTML.toUpperCase()?n.parentElement.style.backgroundColor="rgb(70, 207, 79)":n.parentElement.style.backgroundColor="rgb(198, 70, 70)")}}function A(t){var m,f;let n=0;t.toString().includes("c")?n=1:document.getElementById(t.toString()).style.backgroundColor="rgba(0, 0, 255, 0.65)";let l=u?e:1,o=t-l,c=t+l-n;for(;((m=document.getElementById(o.toString()))==null?void 0:m.className)!=="blocked"&&(u||o%e!==e-1)&&o>=0;)document.getElementById(o.toString()).style.backgroundColor="rgba(173, 216, 230, 0.5)",o-=l;for(;((f=document.getElementById(c.toString()))==null?void 0:f.className)!=="blocked"&&(u||c%e!==0)&&c<b*e;)document.getElementById(c.toString()).style.backgroundColor="rgba(173, 216, 230, 0.5)",c+=l}function O(){var t;for(let n=0;n<b*e;n++)((t=document.getElementById(n.toString()))==null?void 0:t.className)!=="blocked"?document.getElementById(n.toString()).style.backgroundColor="transparent":document.getElementById(n.toString()).style.backgroundColor="black"}function W(t){var n;((n=document.getElementById(t.toString()))==null?void 0:n.className)!=="blocked"&&(u=!u,O(),A(t))}function j(t,n){var o,c,m,f,w;if(((o=document.getElementById(t.toString()))==null?void 0:o.className)==="blocked")return;let l=t;if(u){for(;((m=document.getElementById(l.toString()))==null?void 0:m.className)!=="blocked"&&l>=e;)if(l-=e,l<e&&((f=document.getElementById(l.toString()))==null?void 0:f.className)!=="blocked"){l-=e;break}for(l+=e,l++;I[l]===void 0||T(l);)if(l++,l>=b*e){V();return}(w=document.getElementById(l.toString()))==null||w.focus()}else{for(l++;L[l]===void 0||T(l);)if(l++,l>=b*e){V();return}(c=document.getElementById(l.toString()))==null||c.focus()}}function J(){var n,l,o,c;(n=document.activeElement)!=null&&n.classList.value.includes("blocked")?document.activeElement.className="square":(l=document.activeElement)!=null&&l.classList.value.includes("square")&&(O(),document.activeElement.className="blocked",document.activeElement instanceof HTMLInputElement&&(document.activeElement.value="",document.activeElement.maxLength=0));let t=(Number((o=document.activeElement)==null?void 0:o.getAttribute("id"))+1)%(b*e);(c=document.getElementById(t.toString()))==null||c.focus(),P()}function P(){var o,c,m,f,w;L=[],I=[];let t=0,n=0,l=1;for(let g=0;g<b;g++)for(let h=0;h<e;h++){let d=document.getElementById((g*e+h).toString()),s=(o=d==null?void 0:d.parentElement)==null?void 0:o.children[1],B=d==null?void 0:d.parentElement;if(B.children[0].innerHTML="",d.className!=="blocked"){d.className="",d==null||d.classList.add("square");let H=g*e+h-1,v=!1;(((c=document.getElementById(H.toString()))==null?void 0:c.className)==="blocked"||h===0)&&(d.classList.add(l.toString()+"across"),B.children[0].innerHTML=l.toString(),l++,v=!0,L[g*e+h]=0);let M=(g-1)*e+h;(((m=document.getElementById(M.toString()))==null?void 0:m.className)==="blocked"||g===0)&&(v&&l--,d.classList.add(l.toString()+"down"),B.children[0].innerHTML=l.toString(),l++,I[g*e+h]=0)}d.className.includes("down")?(document.getElementById((s==null?void 0:s.id)+"dc").innerHTML=d.className.substring(d.className.lastIndexOf(" ")+1,d.className.indexOf("down"))+". "+U[n],n++):(f=document.getElementById((s==null?void 0:s.id)+"dc"))==null||f.remove(),d.className.includes("across")?(document.getElementById((s==null?void 0:s.id)+"ac").innerHTML=d.className.substring(d.className.indexOf(" ")+1,d.className.indexOf("across"))+". "+q[t],t++):(w=document.getElementById((s==null?void 0:s.id)+"ac"))==null||w.remove()}}function T(t){var l,o,c,m;let n=t;if(u){for(;(((l=document.getElementById(n.toString()))==null?void 0:l.className)!=="blocked"||n<e)&&n>=0;){if(document.getElementById(n.toString()).value==="")return!1;n-=e}for(;((o=document.getElementById(t.toString()))==null?void 0:o.className)!=="blocked"&&t<b*e;){if(document.getElementById(t.toString()).value==="")return!1;t+=e}return!0}else{for(;((c=document.getElementById(n.toString()))==null?void 0:c.className)!=="blocked"&&n%e!==e-1&&n>=0;){if(document.getElementById(n.toString()).value==="")return!1;n--}for(;((m=document.getElementById(t.toString()))==null?void 0:m.className)!=="blocked"&&(t%e!==0||t===0)&&t<b*e;){if(document.getElementById(t.toString()).value==="")return!1;t++}}return!0}function V(){var n;let t=0;if(u=!u,u)for(;I[t]===void 0||T(t);)t++;else for(;L[t]===void 0||T(t);)t++;(n=document.getElementById(t.toString()))==null||n.focus()}$();var Q=le();Y(_,Q),te()}export{de as component};
