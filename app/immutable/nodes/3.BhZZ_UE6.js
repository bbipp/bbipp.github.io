import{t as J,a as Q}from"../chunks/BEwVjXMF.js";import{i as X}from"../chunks/C3gf4BN4.js";import{p as Y,a as $}from"../chunks/DZhw9-6Z.js";import{o as D}from"../chunks/BZDtRqjk.js";import{p as V}from"../chunks/DvebTSZ5.js";var ee=J('<link rel="stylesheet" href="/shared.css">');function ae(Z,F){Y(F,!1);let q=V.url.toString().substring(V.url.toString().lastIndexOf("/")+1),p="",B=[],H=[],M=[];var e=0,h=0;let u=!1;async function R(t){const s=await fetch("/"+q+".txt");if(s.ok){p=await s.text();for(let o=0;o<p.length;o++)if(p.substring(o,o+1)!="\r")if(p.substring(o,o+1)==`
`){B.push("#");continue}else{B.push(p.substring(o,o+1));continue}}else p="Error loading file";const l=await fetch("/"+q+"Clues.txt");if(l.ok){p=await l.text();let o=p.substring(0,p.indexOf("*")),a=p.substring(p.indexOf("*")+3);for(;o.length>0;)H.push(o.substring(0,o.indexOf("\r"))),o=o.substring(o.indexOf(`
`)+1);for(;a.length>0;)M.push(a.substring(0,a.indexOf("\r"))),a=a.substring(a.indexOf(`
`)+1)}else p="Error loading file";t()}let x=[],C=[];D(()=>{R(function(){_()})});function _(){var A,L;e=B.indexOf("#"),h=B.filter(d=>d==="#").length,document.documentElement.style.setProperty("--cols",e.toString()),document.documentElement.style.setProperty("--rows",h.toString());var t=document.createElement("div");t.setAttribute("class","full-container");var s=document.createElement("div");s.setAttribute("class","grid-container"),document.getElementsByTagName("body")[0].appendChild(t);let l=document.createElement("div"),o=document.createElement("div");l.className="clue-list-across",o.className="clue-list-down";let a=1,m=0,f=0,w=0;for(let d=0;d<h;d++)for(let r=0;r<e;r++){var g=document.createElement("span"),b=document.createElement("span"),c=document.createElement("span");g.className="square-container";var n=document.createElement("input");n.type="text",n.className="square",n.id=(d*e+r).toString(),n.maxLength=1,n.style.padding="0",n.style.border="none",n.style.textTransform="uppercase",n.style.caretColor="transparent";let N=document.createElement("textarea");if(N.rows=2,N.readOnly=!0,n.className!=="blocked"){let i=d*e+r-1,y=!1;(((A=document.getElementById(i.toString()))==null?void 0:A.className)==="blocked"||r===0)&&(n.classList.add(a.toString()+"across"),b.innerHTML=a.toString(),y=!0,x[d*e+r]=0,N.className="clue",N.id=(d*e+r).toString()+"ac",a++,o.appendChild(N));let S=document.createElement("textarea");S.rows=2,S.readOnly=!0;let k=(d-1)*e+r;for((((L=document.getElementById(k.toString()))==null?void 0:L.className)==="blocked"||d===0)&&(y&&a--,n.classList.add(a.toString()+"down"),b.innerHTML=a.toString(),C[d*e+r]=0,S.className="clue",S.id=(d*e+r).toString()+"dc",a++,l.appendChild(S)),n.className.includes("across")&&(N.innerHTML=n.className.substring(n.className.indexOf(" ")+1,n.className.indexOf("across"))+". "+H[f],f++),n.className.includes("down")&&(S.innerHTML=n.className.substring(n.className.lastIndexOf(" ")+1,n.className.indexOf("down"))+". "+M[w],w++),c.innerHTML=B[m],c.style.display="none",m++;B[m]==="#";)m++}n.addEventListener("focus",function(i){var y;((y=document.getElementById((d*e+r).toString()))==null?void 0:y.className)!=="blocked"?K(d*e+r):document.activeElement.style.backgroundColor="dimgray"}),n.addEventListener("blur",function(i){v()}),n.addEventListener("keyup",function(i){var y=0;let S=(d*e+r).toString();var k=document.getElementById(S);if(i.code>="KeyA"&&i.code<="KeyZ"&&(k==null?void 0:k.className)!=="blocked")k.value=i.key.toUpperCase(),y=1;else if(i.key==="Backspace")k.value="",y=-1;else if(i.code==="Space"){U(d*e+r);return}else if(i.key==="Enter"){z();return}u&&(y=y*e);let T=(d*e+r+y).toString();var E=document.getElementById(T);((E==null?void 0:E.className)==="blocked"||E==null)&&i.code>="KeyA"&&i.code<="KeyZ"?W(d*e+r):E&&E.focus()}),n.ondblclick=function(i){U(d*e+r)},n.onkeydown=function(i){if(i.key==="ArrowRight"){u=!1;let E=(d*e+r+1).toString();var y=document.getElementById(E);y&&y.focus()}else if(i.key==="ArrowLeft"){u=!1;let E=(d*e+r-1).toString();var S=document.getElementById(E);S&&S.focus()}else if(i.key==="ArrowDown"){u=!0;let E=((d+1)*e+r).toString();var k=document.getElementById(E);k&&k.focus()}else if(i.key==="ArrowUp"){u=!0;let E=((d-1)*e+r).toString();var T=document.getElementById(E);T&&T.focus()}else i.key==="Tab"&&W(d*e+r)},g.appendChild(b),g.appendChild(n),g.appendChild(c),c.innerHTML===" "&&(n.className="blocked",n.maxLength=0,n.style.backgroundColor="black"),s.appendChild(g),t.appendChild(s)}let I=document.createElement("form");t.appendChild(o),t.appendChild(l),t.appendChild(I),j()}function K(t){var m,f;let s=0;t.toString().includes("c")?s=1:document.getElementById(t.toString()).style.backgroundColor="rgba(0, 0, 255, 0.65)";let l=u?e:1,o=t-l,a=t+l-s;for(;((m=document.getElementById(o.toString()))==null?void 0:m.className)!=="blocked"&&(u||o%e!==e-1)&&o>=0;)document.getElementById(o.toString()).style.backgroundColor="rgba(173, 216, 230, 0.5)",o-=l;for(;((f=document.getElementById(a.toString()))==null?void 0:f.className)!=="blocked"&&(u||a%e!==0)&&a<h*e;)document.getElementById(a.toString()).style.backgroundColor="rgba(173, 216, 230, 0.5)",a+=l}function v(){var t;for(let s=0;s<h*e;s++)((t=document.getElementById(s.toString()))==null?void 0:t.className)!=="blocked"?document.getElementById(s.toString()).style.backgroundColor="transparent":document.getElementById(s.toString()).style.backgroundColor="black"}function U(t){var s;((s=document.getElementById(t.toString()))==null?void 0:s.className)!=="blocked"&&(u=!u,v(),K(t))}function W(t,s){var o,a,m,f,w;if(((o=document.getElementById(t.toString()))==null?void 0:o.className)==="blocked")return;let l=t;if(u){for(;((m=document.getElementById(l.toString()))==null?void 0:m.className)!=="blocked"&&l>=e;)if(l-=e,l<e&&((f=document.getElementById(l.toString()))==null?void 0:f.className)!=="blocked"){l-=e;break}for(l+=e,l++;C[l]===void 0||O(l);)if(l++,l>=h*e){P();return}(w=document.getElementById(l.toString()))==null||w.focus()}else{for(l++;x[l]===void 0||O(l);)if(l++,l>=h*e){P();return}(a=document.getElementById(l.toString()))==null||a.focus()}}function z(){var s,l,o,a;(s=document.activeElement)!=null&&s.classList.value.includes("blocked")?document.activeElement.className="square":(l=document.activeElement)!=null&&l.classList.value.includes("square")&&(v(),document.activeElement.className="blocked",document.activeElement instanceof HTMLInputElement&&(document.activeElement.value="",document.activeElement.maxLength=0));let t=(Number((o=document.activeElement)==null?void 0:o.getAttribute("id"))+1)%(h*e);(a=document.getElementById(t.toString()))==null||a.focus(),j()}function j(){var o,a,m,f,w;x=[],C=[];let t=0,s=0,l=1;for(let g=0;g<h;g++)for(let b=0;b<e;b++){let c=document.getElementById((g*e+b).toString()),n=(o=c==null?void 0:c.parentElement)==null?void 0:o.children[1],I=c==null?void 0:c.parentElement;if(I.children[0].innerHTML="",c.className!=="blocked"){c.className="",c==null||c.classList.add("square");let A=g*e+b-1,L=!1;(((a=document.getElementById(A.toString()))==null?void 0:a.className)==="blocked"||b===0)&&(c.classList.add(l.toString()+"across"),I.children[0].innerHTML=l.toString(),l++,L=!0,x[g*e+b]=0);let d=(g-1)*e+b;(((m=document.getElementById(d.toString()))==null?void 0:m.className)==="blocked"||g===0)&&(L&&l--,c.classList.add(l.toString()+"down"),I.children[0].innerHTML=l.toString(),l++,C[g*e+b]=0)}c.className.includes("down")?(document.getElementById((n==null?void 0:n.id)+"dc").innerHTML=c.className.substring(c.className.lastIndexOf(" ")+1,c.className.indexOf("down"))+". "+M[s],s++):(f=document.getElementById((n==null?void 0:n.id)+"dc"))==null||f.remove(),c.className.includes("across")?(document.getElementById((n==null?void 0:n.id)+"ac").innerHTML=c.className.substring(c.className.indexOf(" ")+1,c.className.indexOf("across"))+". "+H[t],t++):(w=document.getElementById((n==null?void 0:n.id)+"ac"))==null||w.remove()}}function O(t){var l,o,a,m;let s=t;if(u){for(;(((l=document.getElementById(s.toString()))==null?void 0:l.className)!=="blocked"||s<e)&&s>=0;){if(document.getElementById(s.toString()).value==="")return!1;s-=e}for(;((o=document.getElementById(t.toString()))==null?void 0:o.className)!=="blocked"&&t<h*e;){if(document.getElementById(t.toString()).value==="")return!1;t+=e}return!0}else{for(;((a=document.getElementById(s.toString()))==null?void 0:a.className)!=="blocked"&&s%e!==e-1&&s>=0;){if(document.getElementById(s.toString()).value==="")return!1;s--}for(;((m=document.getElementById(t.toString()))==null?void 0:m.className)!=="blocked"&&(t%e!==0||t===0)&&t<h*e;){if(document.getElementById(t.toString()).value==="")return!1;t++}}return!0}function P(){var s;let t=0;if(u=!u,u)for(;C[t]===void 0||O(t);)t++;else for(;x[t]===void 0||O(t);)t++;(s=document.getElementById(t.toString()))==null||s.focus()}X();var G=ee();Q(Z,G),$()}export{ae as component};
