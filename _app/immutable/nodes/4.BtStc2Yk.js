import{t as W,a as j}from"../chunks/BEwVjXMF.js";import{i as R}from"../chunks/C3gf4BN4.js";import{p as Z,a as z}from"../chunks/DZhw9-6Z.js";import{o as _}from"../chunks/BZDtRqjk.js";var F=W('<link rel="stylesheet" href="/shared.css">');function X(M,K){Z(K,!1);var e=0,y=0;let f=!1,k=[],h=[];_(()=>{C()});function C(){var H,q;var t=document.createElement("div");t.setAttribute("class","full-container");var n=document.createElement("div");n.setAttribute("class","grid-container"),document.getElementsByTagName("body")[0].appendChild(t);let l=document.createElement("div"),c=document.createElement("div");l.className="clue-list-across",c.className="clue-list-down",e=parseInt(window.getComputedStyle(document.body).getPropertyValue("--cols")),y=parseInt(window.getComputedStyle(document.body).getPropertyValue("--rows"));let o=1;for(let a=0;a<y;a++)for(let d=0;d<e;d++){var r=document.createElement("span"),u=document.createElement("span");r.className="square-container";var s=document.createElement("input");if(s.type="text",s.className="square",s.id=(a*e+d).toString(),s.maxLength=1,s.style.padding="0",s.style.border="none",s.style.textTransform="uppercase",s.style.caretColor="transparent",s.className!=="blocked"){let i=a*e+d-1,m=!1;if(((H=document.getElementById(i.toString()))==null?void 0:H.className)==="blocked"||d===0){s.classList.add(o.toString()+"across"),u.innerHTML=o.toString(),o++,m=!0,k[a*e+d]=0;let g=document.createElement("textarea");g.className="clue",g.id=(a*e+d).toString()+"ac",c.appendChild(g)}let E=(a-1)*e+d;if(((q=document.getElementById(E.toString()))==null?void 0:q.className)==="blocked"||a===0){m&&o--,s.classList.add(o.toString()+"down"),u.innerHTML=o.toString(),o++,h[a*e+d]=0;let g=document.createElement("textarea");g.className="clue",g.id=(a*e+d).toString()+"dc",l.appendChild(g)}}s.addEventListener("focus",function(i){var m;((m=document.getElementById((a*e+d).toString()))==null?void 0:m.className)!=="blocked"?L(a*e+d):document.activeElement.style.backgroundColor="dimgray"}),s.addEventListener("blur",function(i){N()}),s.addEventListener("keyup",function(i){var m=0;let E=(a*e+d).toString();var g=document.getElementById(E);if(i.code>="KeyA"&&i.code<="KeyZ"&&(g==null?void 0:g.className)!=="blocked")g.value=i.key.toUpperCase(),m=1;else if(i.key==="Backspace")g.value="",m=-1;else if(i.code==="Space"){A(a*e+d);return}else if(i.key==="Enter"){P();return}f&&(m=m*e);let I=(a*e+d+m).toString();var p=document.getElementById(I);((p==null?void 0:p.className)==="blocked"||p==null)&&i.code>="KeyA"&&i.code<="KeyZ"?x(a*e+d):p&&p.focus()}),s.ondblclick=function(i){A(a*e+d)},s.onkeydown=function(i){if(i.key==="ArrowRight"){f=!1;let p=(a*e+d+1).toString();var m=document.getElementById(p);m&&m.focus()}else if(i.key==="ArrowLeft"){f=!1;let p=(a*e+d-1).toString();var E=document.getElementById(p);E&&E.focus()}else if(i.key==="ArrowDown"){f=!0;let p=((a+1)*e+d).toString();var g=document.getElementById(p);g&&g.focus()}else if(i.key==="ArrowUp"){f=!0;let p=((a-1)*e+d).toString();var I=document.getElementById(p);I&&I.focus()}else i.key==="Tab"&&x(a*e+d)},r.appendChild(u),r.appendChild(s),n.appendChild(r),t.appendChild(n)}let S=document.createElement("form"),b=document.createElement("input"),w=document.createElement("input");b.id="rowInput",w.id="colInput",b.type="number",w.type="number",b.placeholder="rows",w.placeholder="columns";let v=document.createElement("input");v.type="submit",v.value="resize",v.addEventListener("click",a=>{a.preventDefault();let d=document.getElementById("rowInput"),i=document.getElementById("colInput");if(i.value===""||d.value==="")console.log("bad");else{let m=document.querySelector(":root");m.style.setProperty("--cols",i.value),m.style.setProperty("--rows",d.value),document.querySelectorAll("div").forEach(E=>E.remove()),C()}}),S.appendChild(b),S.appendChild(w),S.appendChild(v),t.appendChild(l),t.appendChild(c),t.appendChild(S)}function L(t){var r,u;let n=0;t.toString().includes("c")?n=1:document.getElementById(t.toString()).style.backgroundColor="rgba(0, 0, 255, 0.65)";let l=f?e:1,c=t-l,o=t+l-n;for(;((r=document.getElementById(c.toString()))==null?void 0:r.className)!=="blocked"&&(f||c%e!==e-1)&&c>=0;)document.getElementById(c.toString()).style.backgroundColor="rgba(173, 216, 230, 0.5)",c-=l;for(;((u=document.getElementById(o.toString()))==null?void 0:u.className)!=="blocked"&&(f||o%e!==0)&&o<y*e;)document.getElementById(o.toString()).style.backgroundColor="rgba(173, 216, 230, 0.5)",o+=l}function N(){var t;for(let n=0;n<y*e;n++)((t=document.getElementById(n.toString()))==null?void 0:t.className)!=="blocked"?document.getElementById(n.toString()).style.backgroundColor="transparent":document.getElementById(n.toString()).style.backgroundColor="black"}function A(t){var n;((n=document.getElementById(t.toString()))==null?void 0:n.className)!=="blocked"&&(f=!f,N(),L(t))}function x(t,n){var c,o,r,u,s;if(((c=document.getElementById(t.toString()))==null?void 0:c.className)==="blocked")return;let l=t;if(f){for(;((r=document.getElementById(l.toString()))==null?void 0:r.className)!=="blocked"&&l>=e;)if(l-=e,l<e&&((u=document.getElementById(l.toString()))==null?void 0:u.className)!=="blocked"){l-=e;break}for(l+=e,l++;h[l]===void 0||B(l);)if(l++,l>=y*e){T();return}(s=document.getElementById(l.toString()))==null||s.focus()}else{for(l++;k[l]===void 0||B(l);)if(l++,l>=y*e){T();return}(o=document.getElementById(l.toString()))==null||o.focus()}}function P(){var n,l,c,o;(n=document.activeElement)!=null&&n.classList.value.includes("blocked")?document.activeElement.className="square":(l=document.activeElement)!=null&&l.classList.value.includes("square")&&(N(),document.activeElement.className="blocked",document.activeElement instanceof HTMLInputElement&&(document.activeElement.value="",document.activeElement.maxLength=0));let t=(Number((c=document.activeElement)==null?void 0:c.getAttribute("id"))+1)%(y*e);(o=document.getElementById(t.toString()))==null||o.focus(),V()}function V(){var n,l;k=[],h=[];let t=1;for(let c=0;c<y;c++)for(let o=0;o<e;o++){let r=document.getElementById((c*e+o).toString()),u=r==null?void 0:r.parentElement;if(u.children[0].innerHTML="",r.className!=="blocked"){r.className="",r==null||r.classList.add("square");let s=c*e+o-1,S=!1;(((n=document.getElementById(s.toString()))==null?void 0:n.className)==="blocked"||o===0)&&(r.classList.add(t.toString()+"across"),u.children[0].innerHTML=t.toString(),t++,S=!0,k[c*e+o]=0);let b=(c-1)*e+o;(((l=document.getElementById(b.toString()))==null?void 0:l.className)==="blocked"||c===0)&&(S&&t--,r.classList.add(t.toString()+"down"),u.children[0].innerHTML=t.toString(),t++,h[c*e+o]=0)}}}function B(t){var l,c,o,r;let n=t;if(f){for(;(((l=document.getElementById(n.toString()))==null?void 0:l.className)!=="blocked"||n<e)&&n>=0;){if(document.getElementById(n.toString()).value==="")return!1;n-=e}for(;((c=document.getElementById(t.toString()))==null?void 0:c.className)!=="blocked"&&t<y*e;){if(document.getElementById(t.toString()).value==="")return!1;t+=e}return!0}else{for(;((o=document.getElementById(n.toString()))==null?void 0:o.className)!=="blocked"&&n%e!==e-1&&n>=0;){if(document.getElementById(n.toString()).value==="")return!1;n--}for(;((r=document.getElementById(t.toString()))==null?void 0:r.className)!=="blocked"&&(t%e!==0||t===0)&&t<y*e;){if(document.getElementById(t.toString()).value==="")return!1;t++}}return!0}function T(){var n;let t=0;if(f=!f,f)for(;h[t]===void 0||B(t);)t++;else for(;k[t]===void 0||B(t);)t++;(n=document.getElementById(t.toString()))==null||n.focus()}R();var U=F();j(M,U),z()}export{X as component};
